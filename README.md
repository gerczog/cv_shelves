# CV Shelves - ML –î–æ–¥–∞—Ç–æ–∫ –¥–ª—è –î–µ—Ç–µ–∫—Ü—ñ—ó –û–±'—î–∫—Ç—ñ–≤

–°—É—á–∞—Å–Ω–∏–π –≤–µ–±-–¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è –¥–µ—Ç–µ–∫—Ü—ñ—ó –æ–±'—î–∫—Ç—ñ–≤ –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è—Ö –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –º–æ–¥–µ–ª–µ–π RFDETR —Ç–∞ YOLO.

## üöÄ –®–≤–∏–¥–∫–∏–π –°—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫
```bash
# –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
git clone <repository-url>
cd cv_shelves_backend

# –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
cp example.env .env
nano .env  # –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç
make up
```

### –î–æ—Å—Ç—É–ø –¥–æ —Å–µ—Ä–≤—ñ—Å—ñ–≤
- **Frontend (Development)**: http://localhost:3001
- **Frontend (Production)**: http://localhost:3002
- **Backend API**: http://localhost:8000
- **API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**: http://localhost:8000/docs

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥–∏ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è

```bash
make up              # –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
make up-dev          # –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏
make up-prod         # –ó–∞–ø—É—Å–∫ –≤ production —Ä–µ–∂–∏–º—ñ
make down            # –ó—É–ø–∏–Ω–∫–∞ —Å–µ—Ä–≤—ñ—Å—ñ–≤
make restart         # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
make rebuild         # –ü–æ–≤–Ω–∞ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∑ –∫–µ—à–µ–º
make rebuild-no-cache # –ü–æ–≤–Ω–∞ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –±–µ–∑ –∫–µ—à—É
make ps              # –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
make logs            # –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
make logs-app        # –õ–æ–≥–∏ backend
make logs-frontend   # –õ–æ–≥–∏ frontend
make clean           # –û—á–∏—â–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏
make clean-volumes   # –û—á–∏—â–µ–Ω–Ω—è volumes
make stats           # –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
make images          # –†–æ–∑–º—ñ—Ä Docker –æ–±—Ä–∞–∑—ñ–≤
make help            # –°–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∫–æ–º–∞–Ω–¥
```

## üìã –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Backend**: FastAPI, Python 3.13
- **Frontend**: React, TypeScript, Ant Design
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö**: PostgreSQL
- **ML –ú–æ–¥–µ–ª—ñ**: RFDETR, YOLO
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è**: Docker, Docker Compose
- **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –º–æ–¥–µ–ª—è–º–∏**: Hugging Face Hub

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –û–±–æ–≤'—è–∑–∫–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
```env
HF_TOKEN=hf_your_token_here          # –¢–æ–∫–µ–Ω Hugging Face
POSTGRES_PASSWORD=your_password       # –ü–∞—Ä–æ–ª—å –ë–î
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É
```
cv_shelves_backend/
‚îú‚îÄ‚îÄ app/              # Backend –¥–æ–¥–∞—Ç–æ–∫
‚îú‚îÄ‚îÄ front/             # Frontend –¥–æ–¥–∞—Ç–æ–∫
‚îú‚îÄ‚îÄ scripts/           # –°–∫—Ä–∏–ø—Ç–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
‚îú‚îÄ‚îÄ DB/                # –ú–æ–¥—É–ª—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ Dockerfile         # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å–µ—Ä–≤—ñ—Å—ñ–≤
‚îî‚îÄ‚îÄ Makefile          # –ö–æ–º–∞–Ω–¥–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
```

## üöÄ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–∞ –°–µ—Ä–≤–µ—Ä—ñ

### –ß–µ—Ä–µ–∑ Git
```bash
git clone <repository-url>
cd cv_shelves_backend
cp example.env .env
# –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ .env —Ñ–∞–π–ª
make up
```

### –ß–µ—Ä–µ–∑ SCP
```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω—ñ–π –º–∞—à–∏–Ω—ñ
tar -czf cv_shelves_backend.tar.gz cv_shelves_backend/
scp cv_shelves_backend.tar.gz user@server:/home/user/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ
tar -xzf cv_shelves_backend.tar.gz
cd cv_shelves_backend
cp example.env .env

# –í–ê–ñ–õ–ò–í–û: –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ .env —Ñ–∞–π–ª –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞
nano .env
# –ó–º—ñ–Ω—ñ—Ç—å:
# REACT_APP_API_URL=http://YOUR_SERVER_IP:8000
# CORS_ORIGINS=http://YOUR_SERVER_IP:3001,http://YOUR_SERVER_IP:8000
# POSTGRES_PASSWORD=strong_password_here

make up
```

## üìä –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- **–î–µ—Ç–µ–∫—Ü—ñ—è –æ–±'—î–∫—Ç—ñ–≤** –∑ RFDETR —Ç–∞ YOLO –º–æ–¥–µ–ª—è–º–∏
- **–Ü—Å—Ç–æ—Ä—ñ—è –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—å** –∑ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—î—é —Ç–∞ –ø–æ—à—É–∫–æ–º
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è** –º–æ–¥–µ–ª–µ–π
- **REST API** –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** ML –º–æ–¥–µ–ª–µ–π
- **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è** –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
- **–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –∑–±—ñ—Ä–∫–∞** –∑ BuildKit —Ç–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è–º
- **–ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞** –¥–ª—è –∑–º–µ–Ω—à–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É –æ–±—Ä–∞–∑—ñ–≤

## üîç API Endpoints

- `GET /v1/api/ml/detect` - –î–µ—Ç–µ–∫—Ü—ñ—è –æ–±'—î–∫—Ç—ñ–≤
- `GET /v1/api/history/predictions` - –Ü—Å—Ç–æ—Ä—ñ—è –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—å
- `GET /v1/api/history/statistics` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /docs` - Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

## ‚ö° –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è Docker

### –®–≤–∏–¥–∫—ñ—Å—Ç—å –∑–±—ñ—Ä–∫–∏
- **BuildKit** —É–≤—ñ–º–∫–Ω–µ–Ω–∏–π –¥–ª—è –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–æ—ó –∑–±—ñ—Ä–∫–∏
- **–ö–µ—à—É–≤–∞–Ω–Ω—è —à–∞—Ä—ñ–≤** –¥–ª—è —à–≤–∏–¥—à–∏—Ö –ø–µ—Ä–µ—Å–±–æ—Ä–æ–∫
- **`.dockerignore`** —Ñ–∞–π–ª–∏ –¥–ª—è –≤–∏–∫–ª—é—á–µ–Ω–Ω—è –∑–∞–π–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤

### –†–æ–∑–º—ñ—Ä –æ–±—Ä–∞–∑—ñ–≤
- **–ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞** –¥–ª—è frontend (nginx + —Å—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏)
- **–¢–æ—á–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è** —Ç—ñ–ª—å–∫–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
- **–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –±–∞–∑–æ–≤—ñ –æ–±—Ä–∞–∑–∏** (alpine, slim)

### –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
```bash
make rebuild-no-cache  # –ü–æ–≤–Ω–∞ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –±–µ–∑ –∫–µ—à—É
make clean-volumes     # –û—á–∏—â–µ–Ω–Ω—è volumes
make stats             # –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å—ñ–≤
make images            # –ü–µ—Ä–µ–≥–ª—è–¥ —Ä–æ–∑–º—ñ—Ä—É –æ–±—Ä–∞–∑—ñ–≤
```

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–î–ª—è –ø–∏—Ç–∞–Ω—å —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ —Å—Ç–≤–æ—Ä—é–π—Ç–µ issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó –∞–±–æ –∑–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—è –¥–æ –∫–æ–º–∞–Ω–¥–∏ —Ä–æ–∑—Ä–æ–±–∫–∏.
